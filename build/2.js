webpackJsonp([2,5],{38:function(t,e,n){"use strict";function r(t){return function(e){return t instanceof RegExp?t.test(e.type):e.type===t}}function i(t){return new m(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),s=n(1),u=n(12),c=n(43),a=n(44),p=n(42),f=n(46);n.d(e,"AttributeContainer",function(){return h}),n.d(e,"GraphNode",function(){return l}),n.d(e,"GraphEdge",function(){return d}),e.isType=r,n.d(e,"AGraph",function(){return y}),n.d(e,"GraphProxy",function(){return m}),e.create=i,n.d(e,"GraphBase",function(){return v}),n.d(e,"MemoryGraph",function(){return b}),n.d(e,"RemoteStoreGraph",function(){return O}),n.d(e,"LocalStorageGraph",function(){return _});var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._attrs={},e}return o.a(e,t),e.prototype.persist=function(){return Object.keys(this._attrs).length>0?{attrs:n.i(s.a)({},this._attrs)}:{}},e.prototype.setAttr=function(t,e){var n=this._attrs[t];(n!==e||Array.isArray(n))&&(this._attrs[t]=e,this.fire("attr-"+t,e,n),this.fire("setAttr",t,e,n))},e.prototype.hasAttr=function(t){return t in this._attrs},e.prototype.getAttr=function(t,e){return void 0===e&&(e=null),t in this._attrs?this._attrs[t]:e},Object.defineProperty(e.prototype,"attrs",{get:function(){return Object.keys(this._attrs)},enumerable:!0,configurable:!0}),e.prototype.restore=function(t){return t.attrs&&(this._attrs=t.attrs),this},e}(f.a),l=function(t){function e(e,r){void 0===e&&(e="node"),void 0===r&&(r=NaN);var i=t.call(this)||this;return i.type=e,i.outgoing=[],i.incoming=[],i._id=NaN,i._id=n.i(s.j)("graph_node",r),i}return o.a(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return isNaN(this._id)&&(this._id=n.i(s.k)("graph_node")),this._id},enumerable:!0,configurable:!0}),e.prototype.persist=function(){var e=t.prototype.persist.call(this);return e.type=this.type,e.id=this.id,e},e.prototype.restore=function(e){return t.prototype.restore.call(this,e),this.type=e.type,this._id=n.i(s.j)("graph_node",e.id),this},e}(h),d=function(t){function e(e,r,i,o){void 0===e&&(e="edge"),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=NaN);var u=t.call(this)||this;return u.type=e,u.source=r,u.target=i,u._id=NaN,u._id=n.i(s.j)("graph_edge",o),r&&i&&u.init(),u}return o.a(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return isNaN(this._id)&&(this._id=n.i(s.k)("graph_edge")),this._id},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.source.outgoing.push(this),this.target.incoming.push(this)},e.prototype.takeDown=function(){this.source&&this.source.outgoing.splice(this.source.outgoing.indexOf(this),1),this.target&&this.target.incoming.splice(this.target.incoming.indexOf(this),1)},e.prototype.toString=function(){return this.source+" "+this.type+" "+this.target},e.prototype.persist=function(){var e=t.prototype.persist.call(this);return e.type=this.type,e.id=this.id,e.source=this.source.id,e.target=this.target.id,e},e.prototype.restore=function(e,r){return t.prototype.restore.call(this,e),this.type=e.type,this._id=n.i(s.j)("graph_edge",e.id),this.source=r(e.source),this.target=r(e.target),this.init(),this},e}(h),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.a(e,t),Object.defineProperty(e.prototype,"nodes",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nnodes",{get:function(){return this.nodes.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edges",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nedges",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),e}(c.a),g={makeNode:function(t){return(new l).restore(t)},makeEdge:function(t,e){return(new d).restore(t,e)}},m=function(t){function e(e){var n=t.call(this,e)||this;return n._impl=null,n._loaded=null,n}return o.a(e,t),Object.defineProperty(e.prototype,"nnodes",{get:function(){return this._loaded?this._loaded.nnodes:this.desc.size[0]||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nedges",{get:function(){return this._loaded?this._loaded.nedges:this.desc.size[1]||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return[this.nnodes,this.nedges]},enumerable:!0,configurable:!0}),e.prototype.impl=function(t){var e=this;if(void 0===t&&(t=g),this._impl)return this._impl;var n=this.desc.storage||"remote";return"memory"===n?(this._loaded=new b(this.desc,[],[],t),this._impl=Promise.resolve(this._loaded)):"local"===n?(this._loaded=_.load(this.desc,t,localStorage),this._impl=Promise.resolve(this._loaded)):"session"===n?(this._loaded=_.load(this.desc,t,sessionStorage),this._impl=Promise.resolve(this._loaded)):"given"===n&&this.desc.graph instanceof v?(this._loaded=this.desc.graph,this._impl=Promise.resolve(this._loaded)):this._impl=O.load(this.desc,t).then(function(t){return e._loaded=t}),this._impl},e.prototype.ids=function(t){return void 0===t&&(t=n.i(p.c)()),this._impl?this._impl.then(function(e){return e.ids(t)}):Promise.resolve(n.i(p.e)())},Object.defineProperty(e.prototype,"idtypes",{get:function(){return["_nodes","_edges"].map(c.b)},enumerable:!0,configurable:!0}),e}(a.a),v=function(t){function e(e,n,r){void 0===n&&(n=[]),void 0===r&&(r=[]);var i=t.call(this)||this;return i.desc=e,i._nodes=n,i._edges=r,i}return o.a(e,t),Object.defineProperty(e.prototype,"nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edges",{get:function(){return this._edges},enumerable:!0,configurable:!0}),e.prototype.addNode=function(t){return this._nodes.push(t),this.fire("add_node",t),this},e.prototype.updateNode=function(t){return this.fire("update_node",t),this},e.prototype.updateEdge=function(t){return this.fire("update_edge",t),this},e.prototype.removeNode=function(t){var e=this._nodes.indexOf(t);return e<0?null:(this._nodes.splice(e,1),this.fire("remove_node",t),this)},e.prototype.addEdge=function(t,e,n){if(t instanceof d){var r=t;return this._edges.push(r),void this.fire("add_edge",r,r.type,r.source,r.target)}return this.addEdge(new d(e,t,n))},e.prototype.removeEdge=function(t){var e=this._edges.indexOf(t);return e<0?null:(t.takeDown(),this._edges.splice(e,1),this.fire("remove_edge",t),this)},Object.defineProperty(e.prototype,"dim",{get:function(){return[this._nodes.length,this._edges.length]},enumerable:!0,configurable:!0}),e.prototype.ids=function(t){return void 0===t&&(t=n.i(p.c)()),Promise.resolve(n.i(p.d)(this._nodes.map(function(t){return t.id}),this._edges.map(function(t){return t.id})))},e.prototype.selectNode=function(t,e){void 0===e&&(e=c.c.SET),this.select(0,[this._nodes.indexOf(t)],e)},e.prototype.selectedNodes=function(){var t=this;return this.selections().then(function(e){var n=[];return e.dim(0).forEach(function(e){return n.push(t._nodes[e])}),n})},e.prototype.selectEdge=function(t,e){void 0===e&&(e=c.c.SET),this.select(1,[this._edges.indexOf(t)],e)},e.prototype.selectedEdges=function(){var t=this;return this.selections().then(function(e){var n=[];return e.dim(1).forEach(function(e){return n.push(t._edges[e])}),n})},Object.defineProperty(e.prototype,"idtypes",{get:function(){return["_nodes","_edges"].map(c.b)},enumerable:!0,configurable:!0}),e.prototype.clear=function(){return this._nodes=[],this._edges=[],this},e.prototype.persist=function(){var t={root:this.desc.id};return t.nodes=this.nodes.map(function(t){return t.persist()}),t.edges=this.edges.map(function(t){return t.persist()}),t},e}(y),b=function(t){function e(e,n,r,i){void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=g);var o=t.call(this,e,n,r)||this;return o.factory=i,o}return o.a(e,t),e.prototype.restore=function(t){var e=this,n={},r=function(t){return n[t]};return t.nodes.forEach(function(t){var r=e.factory.makeNode(t);n[r.id]=r,e.addNode(r)}),t.edges.forEach(function(t){var n=e.factory.makeEdge(t,r);e.addEdge(n)}),this},e}(v),O=function(t){function e(e,n,r){void 0===n&&(n=[]),void 0===r&&(r=[]);var i=t.call(this,e,n,r)||this;return i.updateHandler=function(t){var e=t.target;e instanceof l&&i.updateNode(e),e instanceof d&&i.updateEdge(e)},i._wait_for_synced=0,i}return o.a(e,t),e.load=function(t,n){return new e(t,[],[]).load(n)},e.prototype.load=function(t){var e=this;return n.i(u.b)("/dataset/graph/"+this.desc.id+"/data").then(function(n){return e.loadImpl(n.nodes,n.edges,t),e.fire("sync_load,sync",--e._wait_for_synced),e})},e.prototype.loadImpl=function(e,n,r){var i=this,o={},s=function(t){return o[t]};e.forEach(function(e){var n=r.makeNode(e);o[n.id]=n,n.on("setAttr",i.updateHandler),t.prototype.addNode.call(i,n)}),n.forEach(function(e){var n=r.makeEdge(e,s);n.on("setAttr",i.updateHandler),t.prototype.addEdge.call(i,n)}),this.fire("loaded")},Object.defineProperty(e.prototype,"activeSyncOperations",{get:function(){return this._wait_for_synced},enumerable:!0,configurable:!0}),e.prototype.addNode=function(e){var r=this;return t.prototype.addNode.call(this,e),e.on("setAttr",this.updateHandler),this.fire("sync_start_node,sync_start",++this._wait_for_synced,"add_node",e),n.i(u.b)("/dataset/graph/"+this.desc.id+"/node",{desc:JSON.stringify(e.persist())},"post").then(function(t){return r.fire("sync_node,sync",--r._wait_for_synced,e),r})},e.prototype.updateNode=function(e){var r=this;return t.prototype.updateNode.call(this,e),this.fire("sync_start_node,sync_start",++this._wait_for_synced,"update_node",e),n.i(u.b)("/dataset/graph/"+this.desc.id+"/node/"+e.id,{desc:JSON.stringify(e.persist())},"put").then(function(t){return r.fire("sync_node,sync",--r._wait_for_synced,e),r})},e.prototype.removeNode=function(e){var r=this;return t.prototype.removeNode.call(this,e)?(e.off("setAttr",this.updateHandler),this.fire("sync_start_node,sync_start",++this._wait_for_synced,"remove_node",e),n.i(u.b)("/dataset/graph/"+this.desc.id+"/node/"+e.id,{},"delete").then(function(t){return r.fire("sync_node,sync",--r._wait_for_synced,e),r})):Promise.reject("invalid node")},e.prototype.addEdge=function(e,r,i){var o=this;if(e instanceof d){t.prototype.addEdge.call(this,e);var s=e;return s.on("setAttr",this.updateHandler),this.fire("sync_start_edge,sync_start",++this._wait_for_synced,"add_edge",s),n.i(u.b)("/dataset/graph/"+this.desc.id+"/edge",{desc:JSON.stringify(s.persist())},"post").then(function(t){return o.fire("sync_edge,sync",--o._wait_for_synced,s),o})}return t.prototype.addEdge.call(this,e,r,i)},e.prototype.removeEdge=function(e){var r=this;return t.prototype.removeEdge.call(this,e)?(e.off("setAttr",this.updateHandler),this.fire("sync_start_edge,sync_start",++this._wait_for_synced,"remove_edge",e),n.i(u.b)("/dataset/graph/"+this.desc.id+"/edge/"+e.id,{},"delete").then(function(t){return r.fire("sync_edge,sync",--r._wait_for_synced,e),r})):Promise.reject("invalid edge")},e.prototype.updateEdge=function(e){var r=this;return t.prototype.updateEdge.call(this,e),this.fire("sync_start_edge,sync_start",++this._wait_for_synced,"update_edge",e),n.i(u.b)("/dataset/graph/"+this.desc.id+"/edge/"+e.id,{desc:JSON.stringify(e.persist())},"put").then(function(t){return r.fire("sync_edge,sync",--r._wait_for_synced,e),r})},e.prototype.clear=function(){var e=this;return 0===this.nnodes&&0===this.nedges?Promise.resolve(this):(this.nodes.forEach(function(t){return t.off("setAttr",e.updateHandler)}),this.edges.forEach(function(t){return t.off("setAttr",e.updateHandler)}),t.prototype.clear.call(this),this.fire("sync_start",++this._wait_for_synced,"clear"),n.i(u.b)("/dataset/graph/"+this.desc.id+"/node",{},"delete").then(function(t){return e.fire("sync"),e}))},e}(v),_=function(t){function e(e,n,r,i){void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=sessionStorage);var o=t.call(this,e,n,r)||this;return o.storage=i,o.updateHandler=function(t){var e=t.target;e instanceof l&&o.updateNode(e),e instanceof d&&o.updateEdge(e)},o}return o.a(e,t),e.load=function(t,n,r,i){void 0===r&&(r=sessionStorage),void 0===i&&(i=!1);var o=new e(t,[],[],r);return i||o.load(n),o},e.clone=function(t,n,r){void 0===r&&(r=sessionStorage);var i=new e(t.desc,[],[],r);return i.restoreDump(t.persist(),n),i},Object.defineProperty(e.prototype,"uid",{get:function(){return"graph"+this.desc.id},enumerable:!0,configurable:!0}),e.prototype.load=function(e){var n=this,r=this.uid;if(this.storage.hasOwnProperty(r+".nodes")){var i=JSON.parse(this.storage.getItem(r+".nodes")),o={},s=function(t){return o[t]};i.forEach(function(i){var s=JSON.parse(n.storage.getItem(r+".node."+i)),u=e.makeNode(s);o[u.id]=u,u.on("setAttr",n.updateHandler),t.prototype.addNode.call(n,u)});JSON.parse(this.storage.getItem(r+".edges")).forEach(function(i){var o=JSON.parse(n.storage.getItem(r+".edge."+i)),u=e.makeEdge(o,s);u.on("setAttr",n.updateHandler),t.prototype.addEdge.call(n,u)}),this.fire("loaded")}},e.delete=function(t,e){void 0===e&&(e=sessionStorage);var n="graph"+t.id;return JSON.parse(e.getItem(n+".nodes")).forEach(function(t){e.removeItem(n+".node."+t)}),e.removeItem(n+".nodes"),JSON.parse(e.getItem(n+".edges")).forEach(function(t){e.removeItem(n+".edge."+t)}),e.removeItem(n+".edges"),!0},e.prototype.restoreDump=function(t,e){var n=this,r={},i=function(t){return r[t]};return t.nodes.forEach(function(t){var i=e.makeNode(t);r[i.id]=i,n.addNode(i)}),t.edges.forEach(function(t){var r=e.makeEdge(t,i);n.addEdge(r)}),this},e.prototype.addNode=function(e){t.prototype.addNode.call(this,e);var n=this.uid;return this.storage.setItem(n+".node."+e.id,JSON.stringify(e.persist())),this.storage.setItem(n+".nodes",JSON.stringify(this.nodes.map(function(t){return t.id}))),e.on("setAttr",this.updateHandler),this},e.prototype.updateNode=function(e){t.prototype.updateNode.call(this,e);var n=this.uid;return this.storage.setItem(n+".node."+e.id,JSON.stringify(e.persist())),this},e.prototype.removeNode=function(e){if(!t.prototype.removeNode.call(this,e))return null;var n=this.uid;return this.storage.setItem(n+".nodes",JSON.stringify(this.nodes.map(function(t){return t.id}))),this.storage.removeItem(n+".node."+e.id),e.off("setAttr",this.updateHandler),this},e.prototype.addEdge=function(e,n,r){if(e instanceof d){t.prototype.addEdge.call(this,e);var i=e,o=this.uid;return this.storage.setItem(o+".edges",JSON.stringify(this.edges.map(function(t){return t.id}))),this.storage.setItem(o+".edge."+i.id,JSON.stringify(i.persist())),i.on("setAttr",this.updateHandler),this}return t.prototype.addEdge.call(this,e,n,r)},e.prototype.removeEdge=function(e){if(!t.prototype.removeEdge.call(this,e))return null;var n=this.uid;return this.storage.setItem(n+".edges",JSON.stringify(this.edges.map(function(t){return t.id}))),this.storage.removeItem(n+".edge."+e.id),e.off("setAttr",this.updateHandler),this},e.prototype.updateEdge=function(e){t.prototype.updateEdge.call(this,e);var n=this.uid;return this.storage.setItem(n+".edge."+e.id,JSON.stringify(e.persist())),this},e.prototype.clear=function(){var e=this,n=this.nnodes,r=this.nedges;if(0===n&&0===r)return this;this.nodes.forEach(function(t){return t.off("setAttr",e.updateHandler)}),this.edges.forEach(function(t){return t.off("setAttr",e.updateHandler)}),t.prototype.clear.call(this);var i=this.uid;JSON.parse(this.storage.getItem(i+".nodes")).forEach(function(t){e.storage.removeItem(i+".node."+t)}),this.storage.removeItem(i+".nodes"),JSON.parse(this.storage.getItem(i+".edges")).forEach(function(t){e.storage.removeItem(i+".edge."+t)}),this.storage.removeItem(i+".edges")},e.prototype.persist=function(){var t={root:this.desc.id};return t.nodes=this.nodes.map(function(t){return t.persist()}),t.edges=this.edges.map(function(t){return t.persist()}),t},e}(v)},42:function(t,e,n){"use strict";function r(t,e){return t<0?e+1+t:t}function i(t){return new E("unnamed","gray",t)}function o(t,e){return new w(t,e)}function s(t){if(1===t.length)return t[0];var e=t[0].iter().asList();return t.slice(1).forEach(function(t){t.iter().forEach(function(t){e.indexOf(t)<0&&e.push(t)})}),_.from(e)}function u(){return new P}function c(){var t=new P;return t.dims=[_.none(),_.none()],t}function a(){if(0===arguments.length)return u();var t=new P;return Array.isArray(arguments[0])&&n.i(m.h)(arguments).forEach(function(e,n){0!==e.length&&t.dim(n).setSlice(e[0],e[1],e[2])}),"number"==typeof arguments[0]&&t.dim(0).setSlice(arguments[0],arguments[1],arguments[2]),t}function p(){if(0===arguments.length)return u();var t=new P,e=arguments[0];return Array.isArray(e)||(e=n.i(m.h)(arguments)),t.dims=e.map(function(t){return t.dim(0)}),t}function f(){if(0===arguments.length)return u();var t=new P;return Array.isArray(arguments[0])&&arguments[0][0]instanceof _?t.dims=arguments[0]:Array.isArray(arguments[0])?n.i(m.h)(arguments).forEach(function(e,n){e instanceof _?t.dims[n]=e:t.dim(n).setList(e)}):"number"==typeof arguments[0]?t.dim(0).setList(n.i(m.h)(arguments)):arguments[0]instanceof _&&(t.dims=n.i(m.h)(arguments)),t}function h(t){var e,n,r=0,i=new Array;for(t=t.trim();r<t.length;)switch(e=t.charAt(r)){case'"':n=l(t,r),r=n.act+1,i.push(n.dim);break;case",":r++,i.push(_.all());break;default:e.match(/\s/)?r++:(n=d(t,r),r=n.act+1,i.push(n.dim))}return","===t.charAt(t.length-1)&&i.push(_.all()),new P(i)}function l(t,e){e+=1;var n,r=t.indexOf('"',e),i=t.slice(e,r);switch(e=r+1,t.charAt(e)){case'"':return r=t.indexOf('"',e+1),n=d(t,r+1),{dim:new E(i,t.slice(e+1,r),n.dim),act:n.act};case"{":for(var o=[];"}"!==t.charAt(e);)n=l(t,e+1),o.push(n.dim),e=n.act;return{dim:new w(i,o),act:n.act+1};default:return{dim:_.all(),act:e}}}function d(t,e){var n,r=new _;switch(t.charAt(e)){case",":case"}":n=e,r=_.all();break;case"(":n=t.indexOf(")",e),n>e+1&&r.push.apply(r,t.slice(e+1,n).split(",").map(b.parse)),n+=1;break;default:n=t.indexOf("}",e);var i=t.indexOf(",",e);n>=0&&i>=0?n=Math.min(n,i):n<0&&(n=i),n<0&&(n=t.length),r=new _([b.parse(t.slice(e,n))])}return{act:n,dim:r}}function y(t){return void 0===t&&(t=null),null===t?u():t instanceof P?t:Array.isArray(t)?Array.isArray(t[0])?f.apply(void 0,t):f(t):h(n.i(m.h)(arguments).map(String).join(","))}var g=n(3),m=n(1),v=n(45);n.d(e,"h",function(){return _}),n.d(e,"j",function(){return E}),e.b=i,e.k=o,n.d(e,"a",function(){return w}),n.d(e,"g",function(){return P}),e.c=u,e.e=c,e.l=a,e.i=p,e.d=f,e.f=y;var b=function(){function t(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=1),this.from=t,this.to=e,this.step=n}return Object.defineProperty(t.prototype,"isAll",{get:function(){return 0===this.from&&-1===this.to&&1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return this.from+this.step===this.to},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.from<0||this.to<0},enumerable:!0,configurable:!0}),t.all=function(){return new t(0,-1,1)},t.none=function(){return new t(0,0,1)},t.single=function(t){return new O(t)},t.range=function(e,n,r){return void 0===n&&(n=-1),void 0===r&&(r=1),e+r===n?t.single(e):new t(e,n,r)},t.prototype.size=function(t){var e=r(this.to,t),n=r(this.from,t);if(1===this.step)return Math.max(e-n,0);if(-1===this.step)return Math.max(n-e,0);var i=this.step>0?e-n+1:n-e+1,o=Math.abs(this.step);return i<=0?0:Math.floor(i/o)},t.prototype.clone=function(){return new t(this.from,this.to,this.step)},t.prototype.reverse=function(){var e=this.from<0?this.from:this.from+1;return new t(this.to<0?this.to:this.to-1,e,-this.step)},t.prototype.invert=function(t,e){return this.isAll?t:r(this.from,e)+t*this.step},t.prototype.iter=function(t){return n.i(v.a)(r(this.from,t),r(this.to,t),this.step)},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.contains=function(t,e){var n=r(this.from,e),i=r(this.to,e);return-1===this.step?t<=n&&t>i:t>=n&&t<i},t.prototype.toString=function(){if(this.isAll)return"";if(this.isSingle)return this.from.toString();var t=this.from+":"+this.to;return 1!==this.step&&(t+=":"+this.step),t},t.parse=function(e){if(0===e.length)return t.all();var n=e.split(":");return 1===n.length?t.single(parseFloat(n[0])):2===n.length?new t(parseFloat(n[0]),parseFloat(n[1])):new t(parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]))},t}(),O=function(){function t(t){this.from=t}return Object.defineProperty(t.prototype,"step",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.from+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAll",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.size=function(t){return 1},t.prototype.clone=function(){return new t(this.from)},t.prototype.contains=function(t,e){return r(this.from,e)===t},t.prototype.reverse=function(){return this.clone()},t.prototype.invert=function(t,e){return r(this.from,e)+t},t.prototype.iter=function(t){return n.i(v.b)(r(this.from,t))},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.from.toString()},t}(),_=function(){function t(e){e instanceof t?this.arr=e.arr:Array.isArray(e)?this.arr=e:this.arr=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),t.all=function(){return new t([b.all()])},t.single=function(e){return new t([b.single(e)])},t.none=function(){return new t},t.from=function(e){return new t(t.compress(e))},t.compress=function(t){if(0===t.length)return[];if(1===t.length)return[b.single(t[0])];for(var e=new Array,n=t.slice(1).map(function(e,n){return e-t[n]}),r=0,i=1,o=0;i<t.length;){for(;n[r]===n[i-1]&&i<t.length;)i++;if(i===r+1)e.push(b.single(t[r]));else if(1===Math.abs(n[r]))e.push(b.range(t[r],t[i-1]+n[r],n[r]));else for(o=r;o<i;o++)e.push(b.single(t[o]));r=i,i+=1}for(;r<t.length;)e.push(b.single(t[r++]));return e},Object.defineProperty(t.prototype,"isAll",{get:function(){return 1===this.arr.length&&this.at(0).isAll},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNone",{get:function(){return 0===this.arr.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.arr.some(function(t){return t.isUnbound})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isList",{get:function(){return this.arr.every(function(t){return t.isSingle})},enumerable:!0,configurable:!0}),t.prototype.push=function(){function t(t){return"string"==typeof t?b.parse(t.toString()):"number"==typeof t?b.single(t):Array.isArray(t)?new b(t[0],t[1],t[2]):t}for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.arr.push.apply(this.arr,e.map(t))},t.prototype.pushSlice=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=1),this.arr.push(new b(t,e,n))},t.prototype.pushList=function(e){this.arr.push.apply(this.arr,t.compress(e))},t.prototype.setSlice=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=1),this.arr.length=0,this.pushSlice(t,e,n)},t.prototype.setList=function(t){this.arr.length=0,this.pushList(t)},t.prototype.at=function(t){return t<0&&(t+=this.length),t<0||t>=this.arr.length?b.none():this.arr[t]},t.prototype.size=function(t){return this.arr.map(function(e){return e.size(t)}).reduce(function(t,e){return t+e},0)},Object.defineProperty(t.prototype,"isIdentityRange",{get:function(){return 1===this.arr.length&&0===this.arr[0].from&&1===this.arr[0].step},enumerable:!0,configurable:!0}),t.prototype.repeat=function(e){if(void 0===e&&(e=1),1===e)return this;for(var n=this.arr.slice(),r=1;r<e;++r)n.push.apply(n,this.arr);return new t(n)},t.prototype.preMultiply=function(e,n){if(this.isAll)return e.clone();if(e.isAll)return this.clone();if(e.isNone||this.isNone)return t.none();if(this.isIdentityRange)return e.clone();var r=this.iter(n).asList(),i=function(t){var e=t.iter(r.length),n=[];return e.forEach(function(t){t>=0&&t<r.length&&n.push(r[t])}),t.fromLike(n)};return e instanceof w?o(e.name,e.groups.map(i)):i(e)},t.prototype.union=function(t,e){if(this.isAll||t.isNone)return this.clone();if(t.isAll||this.isNone)return t.clone();var n=this.iter(e).asList();return t.iter(e).forEach(function(t){n.indexOf(t)<0&&n.push(t)}),t.fromLike(n.sort())},t.prototype.intersect=function(e,n){if(this.isNone||e.isNone)return t.none();if(this.isAll)return e.clone();if(e.isAll)return this.clone();var r=this.iter(n).asList(),i=e.iter(n),o=[];return i.forEach(function(t){r.indexOf(t)>=0&&o.push(t)}),e.fromLike(o.sort())},t.prototype.toSet=function(t){return this.removeDuplicates(t)},t.prototype.without=function(e,n){if(this.isNone||e.isNone)return this.clone();if(e.isAll)return t.none();var r=this.iter(n),i=e.iter(n).asList(),o=[];return r.forEach(function(t){i.indexOf(t)<0&&o.push(t)}),t.from(o.sort())},t.prototype.clone=function(){return new t(this.arr.map(function(t){return t.clone()}))},t.prototype.invert=function(t,e){if(this.isAll)return t;if(this.isNone)return-1;for(var n=0,r=this.arr[0].size(e),i=r;i>t&&n<this.length;)n++,r=this.arr[n].size(e),i+=r;return n>=this.arr.length?-1:this.arr[n-1].invert(t-i+r,e)},t.prototype.indexOf=function(){if(arguments[0]instanceof P)return this.indexRangeOf(arguments[0],arguments[1]);var t,e=this.iter().asList();if(1===arguments.length){if("number"==typeof arguments[0])return e.indexOf(arguments[0]);t=arguments[0]}else t=n.i(m.h)(arguments);return 0===t.length?[]:t.map(function(t,n){return e.indexOf(t)})},t.prototype.indexRangeOf=function(e,n){if(e.isNone||this.isNone)return e.fromLike([]);if(e.isAll)return t.all();var r;if(this.isIdentityRange){var i=this.arr[0].to;r=function(t,e){t>=0&&t<i&&e.push(t)}}else{var s=this.iter().asList();r=function(t,e){var n=s.indexOf(t);n>=0&&e.push(n)}}if(e instanceof w)return o(e.name,e.groups.map(function(t){var e=[];return t.forEach(function(t){return r(t,e)}),t.fromLike(e)}));var u=[];return e.forEach(function(t){return r(t,u)}),e.fromLike(u)},t.prototype.filter=function(t,e,n){if(void 0===n&&(n=m.i),this.isAll)return t.map(n);var r=this.iter(e);if(r.byOne&&r instanceof v.c)return t.slice(r.from,r.to).map(n);for(var i=[];r.hasNext();)i.push(n(t[r.next()]));return i},t.prototype.iter=function(t){if(this.isList)return n.i(v.d)(this.arr.map(function(t){return t.from}));var e=this.arr.map(function(e){return e.iter(t)});return v.e.apply(null,e)},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.asList=function(t){return this.iter(t).asList()},Object.defineProperty(t.prototype,"first",{get:function(){return this.isNone?null:this.arr[0].from},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.isNone?null:this.arr[this.arr.length-1].from},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){return this.iter().forEach(t,e)},t.prototype.contains=function(t,e){return this.arr.some(function(n){return n.contains(t,e)})},t.prototype.sort=function(t){void 0===t&&(t=function(t,e){return t-e});var e=this.iter().asList(),n=e.sort(t);return this.fromLike(n)},t.prototype.removeDuplicates=function(e){var n=this.iter().asList();return n=n.sort(),n=n.filter(function(t,e){return t!==n[e-1]}),t.from(n)},t.prototype.reverse=function(){var e=this.arr.map(function(t){return t.reverse()});return e.reverse(),new t(e)},t.prototype.toString=function(){return this.isAll?"":1===this.length?this.arr[0].toString():"("+this.arr.join(",")+")"},t.prototype.eq=function(t){return!!(this===t||this.isAll&&t.isAll||this.isNone&&t.isNone)||this.toString()===t.toString()},t.prototype.fromLike=function(e){return t.from(e)},t}(),E=function(t){function e(e,n,r){var i=t.call(this,r)||this;return i.name=e,i.color=n,i}return g.a(e,t),e.prototype.preMultiply=function(n,r){var i=t.prototype.preMultiply.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.union=function(n,r){var i=t.prototype.union.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.intersect=function(n,r){var i=t.prototype.intersect.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.without=function(n,r){var i=t.prototype.without.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.clone=function(){return new e(this.name,this.color,t.prototype.clone.call(this))},e.prototype.toString=function(){return'"'+this.name+'""'+this.color+'"'+t.prototype.toString.call(this)},e.prototype.toSet=function(n){return new e(this.name,this.color,t.prototype.toSet.call(this,n))},e.prototype.fromLike=function(n){return new e(this.name,this.color,t.prototype.fromLike.call(this,n))},e}(_),w=function(t){function e(e,n,r){var i=t.call(this,r||s(n))||this;return i.name=e,i.groups=n,i}return g.a(e,t),e.prototype.preMultiply=function(n,r){var i=this.groups.length>1?t.prototype.preMultiply.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.preMultiply(n,r)}),i)},e.prototype.union=function(n,r){var i=this.groups.length>1?t.prototype.union.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.union(n,r)}),i)},e.prototype.intersect=function(n,r){var i=this.groups.length>1?t.prototype.intersect.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.intersect(n,r)}),i)},e.prototype.without=function(n,r){var i=this.groups.length>1?t.prototype.without.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.without(n,r)}),i)},e.prototype.clone=function(){var n=this.groups.length>1?t.prototype.clone.call(this):void 0;return new e(name,this.groups.map(function(t){return t.clone()}),n)},e.prototype.sort=function(n){var r=this.groups.length>1?t.prototype.sort.call(this,n):void 0;return new e(this.name,this.groups.map(function(t){return t.sort(n)}),r)},e.prototype.toSet=function(n){var r=this.groups.length>1?t.prototype.toSet.call(this,n):void 0;return new e(this.name,this.groups.map(function(t){return t.toSet(n)}),r)},e.prototype.toString=function(){return'"'+this.name+'"{'+this.groups.join(",")+"}"},e}(_),P=function(){function t(t){void 0===t&&(t=new Array),this.dims=t}return Object.defineProperty(t.prototype,"isAll",{get:function(){return this.dims.every(function(t){return t.isAll})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNone",{get:function(){return this.dims.every(function(t){return t.isNone})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.dims.some(function(t){return t.isUnbound})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this.dim(0).first},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.dim(0).last},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ndim",{get:function(){return this.dims.length},enumerable:!0,configurable:!0}),t.prototype.eq=function(t){return!!(this===t||this.isAll&&t.isAll||this.isNone&&t.isNone)||this.toString()===t.toString()},t.prototype.preMultiply=function(e,n){if(this.isAll)return e.clone();if(e.isAll)return this.clone();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.preMultiply(e.dim(i),n?n[i]:void 0)}),r},t.prototype.union=function(e,n){if(this.isAll||e.isNone)return this.clone();if(e.isAll||this.isNone)return e.clone();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.union(e.dim(i),n?n[i]:void 0)}),r},t.prototype.intersect=function(e,n){if(this.isNone||e.isNone)return c();if(this.isAll)return e.clone();if(e.isAll)return this.clone();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.intersect(e.dim(i),n?n[i]:void 0)}),r},t.prototype.without=function(e,n){if(this.isNone||e.isNone)return this.clone();if(e.isAll)return c();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.without(e.dim(i),n?n[i]:void 0)}),r},t.prototype.clone=function(){var e=new t;return this.dims.forEach(function(t,n){e.dims[n]=t.clone()}),e},t.prototype.swap=function(){var e=new t;return e.dims=this.dims.map(function(t){return t.clone()}).reverse(),e},t.prototype.filter=function(t,e){function n(t){if(t>=r)return m.i;var o=i.dim(t),s=n(t+1),u=e?e[t]:void 0;return function(t){return Array.isArray(t)?o.filter(t,u,s):t}}if(this.isAll)return t;var r=this.ndim,i=this;return n(0)(t)},t.prototype.dim=function(t){var e=this.dims[t];return e||(this.dims[t]=_.all(),this.dims[t])},t.prototype.invert=function(t,e){var n=this;return this.isAll?t:t.map(function(t,r){return n.dim(r).invert(t,e?e[r]:void 0)})},t.prototype.indexRangeOf=function(e,n){return e.isNone||this.isNone?c():this.isNone||e.isAll?this.clone():new t(this.dims.map(function(t,r){return t.indexRangeOf(e.dim(r),n?n[r]:void 0)}))},t.prototype.indexOf=function(){var e=this;if(arguments[0]instanceof t)return this.indexRangeOf(arguments[0],arguments[1]);var r;if(1===arguments.length){if("number"==typeof arguments[0])return this.dim(0).indexOf(arguments[0]);r=arguments[0]}else r=n.i(m.h)(arguments);return 0===r.length?[]:r.map(function(t,n){return e.dim(n).indexOf(t)})},t.prototype.size=function(t){return this.isAll?t:this.dims.map(function(e,n){return e.size(t?t[n]:void 0)})},t.prototype.split=function(){return this.dims.map(function(e){return new t([e])})},t.prototype.product=function(t,e){var n=this,r=this.ndim,i=function(o){var s=o.length;if(s<r){n.dims[s].iter(e?e[s]:null).forEach(function(t){o.push(t),i(o),o.pop()})}else t(o.slice())};i([])},t.prototype.toString=function(){return this.dims.map(function(t){return t.toString()}).join(",")},t}()},43:function(t,e,n){"use strict";function r(t,e,n){if(0===e.ndim)return!0;for(var r=0;r<Math.min(t.ndim,n);++r){var i=t.dim(r),o=e.dim(r);if(o.isAll||i.isAll)return!0;if(!i.isUnbound&&i.asList().every(function(t){return!o.contains(t)}))return!1}return!1}function i(t,e,n){if(0===e.length)return t;var i=[];return t.forEach(function(t){e.some(function(e){return e.eq(t)})||e.some(function(e){return r(t,e,n)})||i.push(t)}),i}function o(t){if(!t)return v.SET;if("string"==typeof t)switch(t.toLowerCase()){case"add":return v.ADD;case"remove":return v.REMOVE;default:return v.SET}return+t}function s(t,e){for(;t.ndim<e;)t.dims[t.ndim]=m.h.none();return t}function u(t){t.forEach(function(t){var e=b[t.id],r=!1;e?e instanceof E&&(e.name=t.name,e.names=t.names):(e=new E(t.id,t.name,t.names),r=!0),b[t.id]=e,r&&n.i(g.b)("register.idtype",e)})}function c(){O||(O=!0,n.i(y.a)("/idtype",{},[]).then(function(t){return u(t),b}))}function a(t){return"y"===t[t.length-1]?t.slice(0,t.length-1)+"ies":t+"s"}function p(t){return t instanceof E?t:h(t,new E(t,t,a(t)))}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new w(t);return h(n.id,n)}function h(t,e){return c(),b.hasOwnProperty(t)?b[t]:(b[t]=e,n.i(g.b)("register.idtype",e),e)}var l=n(3),d=n(1),y=n(12),g=n(46),m=n(42);n.d(e,"c",function(){return v}),n.d(e,"a",function(){return P}),n.d(e,"d",function(){return N}),e.b=p,e.e=f;var v,b={},O=!1,_="selected";!function(t){t[t.SET=0]="SET",t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE"}(v||(v={}));var E=function(t){function e(e,n,r,i){void 0===i&&(i=!1);var o=t.call(this)||this;return o.id=e,o.name=n,o.names=r,o.internal=i,o.sel={},o.name2id_cache={},o.id2name_cache={},o.canBeMappedTo=null,o}return l.a(e,t),e.prototype.persist=function(){var t=this,e={};return Object.keys(this.sel).forEach(function(n){return e[n]=t.sel[n].toString()}),{sel:e,name:this.name,names:this.names}},e.prototype.restore=function(t){var e=this;return this.name=t.name,this.names=t.names,Object.keys(t.sel).forEach(function(r){return e.sel[r]=n.i(m.f)(t.sel[r])}),this},e.prototype.toString=function(){return this.name},e.prototype.selectionTypes=function(){return Object.keys(this.sel)},e.prototype.selections=function(t){return void 0===t&&(t=_),this.sel.hasOwnProperty(t)?this.sel[t]:this.sel[t]=n.i(m.e)()},e.prototype.select=function(){var t=n.i(d.h)(arguments),e="string"==typeof t[0]?t.shift():_,r=n.i(m.f)(t[0]),i=o(t[1]);return this.selectImpl(r,i,e)},e.prototype.selectImpl=function(t,e,r){void 0===e&&(e=v.SET),void 0===r&&(r=_);var i=this.selections(r),o=n.i(m.e)();switch(e){case v.SET:o=t;break;case v.ADD:o=i.union(t);break;case v.REMOVE:o=i.without(t)}if(i.eq(o))return i;this.sel[r]=o;var s=e!==v.REMOVE?t:n.i(m.e)(),u=e===v.ADD?n.i(m.e)():e===v.SET?i:t;return this.fire("select",r,o,s,u,i),this.fire("select-"+r,o,s,u,i),i},e.prototype.clear=function(t){return void 0===t&&(t=_),this.selectImpl(n.i(m.e)(),v.SET,t)},e.prototype.fillMapCache=function(t,e){var n=this;t.forEach(function(t,r){var i=e[r];n.name2id_cache[i]=t,n.id2name_cache[t]=i})},e.prototype.getCanBeMappedTo=function(){return null===this.canBeMappedTo&&(this.canBeMappedTo=n.i(y.a)("/idtype/"+this.id+"/").then(function(t){return t.map(p)})),this.canBeMappedTo},e.prototype.mapToFirstName=function(t,e){var r=p(e),i=t instanceof m.g?t:n.i(m.d)(t);return n.i(y.a)("/idtype/"+this.id+"/"+r.id,{ids:i.toString(),mode:"first"})},e.prototype.mapToName=function(t,e){var r=p(e),i=t instanceof m.g?t:n.i(m.d)(t);return n.i(y.a)("/idtype/"+this.id+"/"+r.id,{ids:i.toString()})},e.prototype.mapToFirstID=function(t,e){var r=p(e),i=t instanceof m.g?t:n.i(m.d)(t);return n.i(y.a)("/idtype/"+this.id+"/"+r.id+"/map",{ids:i.toString(),mode:"first"})},e.prototype.mapToID=function(t,e){var r=p(e),i=t instanceof m.g?t:n.i(m.d)(t);return n.i(y.a)("/idtype/"+this.id+"/"+r.id+"/map",{ids:i.toString()})},e.prototype.map=function(t){var e=this,r=t.filter(function(t){return!(t in e.name2id_cache)});return 0===r.length?Promise.resolve(t.map(function(t){return e.name2id_cache[t]})):n.i(y.a)("/idtype/"+this.id+"/map",{ids:r}).then(function(n){return r.forEach(function(t,r){e.name2id_cache[t]=n[r]}),t.map(function(t){return e.name2id_cache[t]})})},e.prototype.unmap=function(t){var e=this,r=t instanceof m.g?t:n.i(m.d)(t),i=[];if(r.dim(0).forEach(function(t){return t in e.id2name_cache?null:i.push(t)}),0===i.length){var o=[];return r.dim(0).forEach(function(t){return o.push(e.id2name_cache[t])}),Promise.resolve(o)}return n.i(y.a)("/idtype/"+this.id+"/unmap",{ids:n.i(m.d)(i).toString()}).then(function(t){i.forEach(function(n,r){e.id2name_cache[n]=t[r]});var n=[];return r.dim(0).forEach(function(t){return n.push(e.id2name_cache[t])}),n})},e}(g.a),w=function(t){function e(e,n){void 0===n&&(n=!1);var r=t.call(this)||this;return r.elems=e,r.internal=n,r.sel={},r.isOn=!1,r.selectionListener=function(t,e,n,i,o){r.fire("selectDim,selectProduct",r.elems.indexOf(t.currentTarget),e,n,i,o),r.fire("selectDim-"+e+",selectProduct-"+e,r.elems.indexOf(t.currentTarget),n,i,o)},r}return l.a(e,t),e.prototype.on=function(e,n){return this.isOn||(this.enable(),this.isOn=!0),t.prototype.on.call(this,e,n)},Object.defineProperty(e.prototype,"id",{get:function(){return this.elems.map(function(t){return t.id}).join("X")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.elems.map(function(t){return t.name}).join(" x ")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"names",{get:function(){return this.elems.map(function(t){return t.names}).join(" x ")},enumerable:!0,configurable:!0}),e.prototype.enable=function(){var t=this;this.elems.forEach(function(e){return e.on("select",t.selectionListener)})},e.prototype.disable=function(){var t=this;this.elems.forEach(function(e){return e.off("select",t.selectionListener)})},e.prototype.persist=function(){var t=this,e={};return Object.keys(this.sel).forEach(function(n){return e[n]=t.sel[n].map(function(t){return t.toString()})}),{sel:e}},e.prototype.restore=function(t){var e=this;return Object.keys(t.sel).forEach(function(n){return e.sel[n]=t.sel[n].map(m.f)}),this},e.prototype.toString=function(){return this.name},e.prototype.selectionTypes=function(){return Object.keys(this.sel)},e.prototype.selections=function(t){return void 0===t&&(t=_),this.sel.hasOwnProperty(t)?this.sel[t].slice():(this.sel[t]=[],[])},e.prototype.productSelections=function(t){var e=this;void 0===t&&(t=_);var r=this.selections(t),i=this.toPerDim(r);return this.elems.forEach(function(o,s){var u=o.selections(t),c=u.without(i[s]);c.isNone||r.push(n.i(m.d)(e.elems.map(function(t){return o===t?c.dim(0):m.h.all()})))}),r},e.prototype.select=function(){var t=n.i(d.h)(arguments),e="string"==typeof t[0]?t.shift():_,r=t[0].map(m.f),i=o(t[1]);return this.selectImpl(r,i,e)},e.prototype.selectImpl=function(t,e,n){void 0===e&&(e=v.SET),void 0===n&&(n=_);var r=t.map(m.f),o=this.selections(n),s=[];switch(e){case v.SET:s=r;break;case v.ADD:s=o.concat(r);break;case v.REMOVE:s=i(o,r,this.elems.length)}this.sel[n]=s;var u=this.toPerDim(s);this.disable(),this.elems.forEach(function(t,e){return t.select(n,u[e])}),this.enable();var c=e!==v.REMOVE?r:[],a=e===v.ADD?[]:e===v.SET?o:r;return this.fire("select",n,s,c,a,o),this.fire("selectProduct",-1,n,s,c,a,o),this.fire("select-"+n,s,c,a,o),this.fire("selectProduct-"+n,-1,s,c,a,o),o},e.prototype.toPerDim=function(t){return this.elems.map(function(e,r){if(0===t.length)return n.i(m.e)();var i=t.map(function(t){return t.dim(r)}),o=i.reduce(function(t,e){return t?t.union(e):e},null);return n.i(m.d)(o)})},e.prototype.clear=function(t){return void 0===t&&(t=_),this.selectImpl([],v.SET,t)},e}(g.a),P=(function(t){function e(e,n){var r=t.call(this,e,n,n+"s",!0)||this;return r.instances=[],r.pool=new d.l,r}l.a(e,t),e.prototype.nextId=function(t){var e=this.pool.checkOut();return t&&(t.id=e,this.instances[e]=t,this.fire("add",e,t)),e},e.prototype.push=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach(function(e){t.instances[e.id]=e,t.fire("add",e.id,e)})},e.prototype.byId=function(t){return this.instances[t]},e.prototype.forEach=function(t,e){var n=this;this.instances.forEach(function(r,i){return n.pool.isCheckedOut(i)?t.call(e,r):null})},Object.defineProperty(e.prototype,"entries",{get:function(){var t=this;return this.instances.filter(function(e,n){return t.pool.isCheckedOut(n)})},enumerable:!0,configurable:!0}),e.prototype.remove=function(t){var e=this,n=null;return"number"==typeof t.id&&(t=t.id),"number"==typeof t&&(n=this.instances[t],delete this.instances[t],this.fire("remove",t,n)),this.selectionTypes().forEach(function(n){e.select(n,[t],v.REMOVE)}),this.pool.checkIn(t),n},e.prototype.selectedObjects=function(t){return void 0===t&&(t=_),this.selections(t).filter(this.instances)}}(E),function(){function t(){this.pool=new d.l,this.lookup={}}t.prototype.unmapOne=function(t){return this.unmap([t])[0]},t.prototype.unmap=function(t){var e=this,n=Object.keys(this.lookup);return t.map(function(t){for(var r in n)if(e.lookup[r]===t)return r;return null})},t.prototype.mapOne=function(t){return t in this.lookup?this.lookup[t]:(this.lookup[t]=this.pool.checkOut(),this.lookup[t])},t.prototype.map=function(t){var e=this,n=t.map(function(t){return e.mapOne(t)});return m.d.apply(void 0,n)}}(),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numSelectListeners=0,e.selectionListeners=[],e.singleSelectionListener=function(t,n,r,i,o){e.ids().then(function(t){r=t.indexOf(r),i=t.indexOf(i),o=t.indexOf(o),r.isNone&&i.isNone&&o.isNone||(s(r,t.ndim),s(i,t.ndim),s(o,t.ndim),e.fire("select",n,r,i,o),e.fire("select-"+n,r,i,o))})},e.selectionCache=[],e.accumulateEvents=-1,e}return l.a(e,t),e.prototype.ids=function(t){throw new Error("not implemented")},e.prototype.fromIdRange=function(t){return void 0===t&&(t=n.i(m.c)()),this.ids().then(function(e){return e.indexOf(t)})},Object.defineProperty(e.prototype,"idtypes",{get:function(){throw new Error("not implemented")},enumerable:!0,configurable:!0}),e.prototype.selectionListener=function(t,e,n){var r=this;return function(t,i,o,s,u){r.selectionCache[e]={act:o,added:s,removed:u},(r.accumulateEvents<0||++r.accumulateEvents===n)&&r.fillAndSend(i,e)}},e.prototype.fillAndSend=function(t,e){var r=this,i=this.idtypes,o=i.map(function(e,i){var o=r.selectionCache[i];return o||{act:e.selections(t),added:n.i(m.e)(),removed:n.i(m.e)()}}),u=n.i(m.i)(o.map(function(t){return t.act})),c=n.i(m.i)(o.map(function(t){return t.added})),a=n.i(m.i)(o.map(function(t){return t.removed}));this.selectionCache=[],this.accumulateEvents=-1,this.ids().then(function(e){u=e.indexOf(u),c=e.indexOf(c),a=e.indexOf(a),u.isNone&&c.isNone&&a.isNone||(s(u,e.ndim),s(c,e.ndim),s(a,e.ndim),r.fire("select",t,u,c,a),r.fire("select-"+t,u,c,a))})},e.prototype.on=function(e,n){var r=this;if("string"==typeof e&&("select"===e||"select-"===e.slice(0,"select-".length))&&1===++this.numSelectListeners){var i=this.idtypes;1===i.length?(this.selectionListeners.push(this.singleSelectionListener),i[0].on("select",this.singleSelectionListener)):i.forEach(function(t,e){var n=r.selectionListener(t,e,i.length);r.selectionListeners.push(n),t.on("select",n)})}return t.prototype.on.call(this,e,n)},e.prototype.off=function(e,n){var r=this;return("string"==typeof e&&"select"===e||"select-"===e.match("^select-"))&&0===--this.numSelectListeners&&(this.idtypes.forEach(function(t,e){return t.off("select",r.selectionListeners[e])}),this.selectionListeners=[]),t.prototype.off.call(this,e,n)},e.prototype.selections=function(t){var e=this;return void 0===t&&(t=_),this.ids().then(function(r){var i=n.i(m.i)(e.idtypes.map(function(e){return e.selections(t)}));return r.indexRangeOf(i)})},e.prototype.select=function(){var t=n.i(d.h)(arguments),e="number"==typeof t[0]?+t.shift():-1,r="string"==typeof t[0]?t.shift():_,i=n.i(m.f)(t[0]),s=o(t[1]);return this.selectImpl(i,s,r,e)},e.prototype.selectImpl=function(t,e,r,i){var o=this;return void 0===e&&(e=v.SET),void 0===r&&(r=_),void 0===i&&(i=-1),this.ids().then(function(s){var u=o.idtypes;if(-1===i){t=s.preMultiply(t),o.accumulateEvents=0;var c=n.i(m.i)(t.split().map(function(t,n){return u[n].select(r,t,e)}));for(o.accumulateEvents>0&&o.fillAndSend(r,-1);c.ndim<u.length;)c.dim(c.ndim);return s.indexRangeOf(c)}return s=s.split()[i],t=s.preMultiply(t),u[i].select(r,t,e),s.indexRangeOf(t)})},e.prototype.clear=function(){var t=n.i(d.h)(arguments),e="number"==typeof t[0]?+t.shift():-1,r="string"==typeof t[0]?t[0]:_;return this.selectImpl(n.i(m.e)(),v.SET,r,e)},e}(g.a)),N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numProductSelectListeners=0,e.productSelectionListener=function(t,n,r){var i=e.producttype.productSelections(r);if(0===i.length)return e.fire("selectProduct",r,[]),void e.fire("selectProduct-"+r,[]);e.ids().then(function(t){var n=i.map(function(e){return t.indexOf(e)}).filter(function(t){return!t.isNone});0!==n.length&&(n.forEach(function(e){return s(e,t.ndim)}),e.fire("selectProduct",r,n),e.fire("selectProduct-"+r,n))})},e}return l.a(e,t),Object.defineProperty(e.prototype,"producttype",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.on=function(e,n){return"string"!=typeof e||"select"!==e&&"selectProduct"!==e&&"select-"!==e.slice(0,"select-".length)||1===++this.numProductSelectListeners&&this.producttype.on("selectProduct",this.productSelectionListener),t.prototype.on.call(this,e,n)},e.prototype.off=function(e,n){return"string"!=typeof e||"select"!==e&&"selectProduct"!==e&&"select-"!==e.slice(0,"select-".length)||0===--this.numProductSelectListeners&&this.producttype.off("selectProduct",this.productSelectionListener),t.prototype.off.call(this,e,n)},e.prototype.productSelections=function(t){var e=this;return void 0===t&&(t=_),this.ids().then(function(n){var r=e.producttype.productSelections(t),i=r.map(function(t){return n.indexRangeOf(t)}).filter(function(t){return!t.isNone});return i.forEach(function(t){return s(t,n.ndim)}),i})},e.prototype.selectProduct=function(){var t=n.i(d.h)(arguments),e="string"==typeof t[0]?t.shift():_,r=t[0].map(m.f),i=o(t[1]);return this.selectProductImpl(r,i,e)},e.prototype.selectProductImpl=function(t,e,n){var r=this;return void 0===e&&(e=v.SET),void 0===n&&(n=_),this.ids().then(function(i){t=t.map(function(t){return i.preMultiply(t)}),r.producttype.select(n,t,e)})},e.prototype.clear=function(){var t=n.i(d.h)(arguments);"number"==typeof t[0]&&t.shift();var e="string"==typeof t[0]?t[0]:_;return this.selectProductImpl([],v.SET,e||_)},e}(P)},44:function(t,e,n){"use strict";function r(t){if(0===t.length||0===t[0].length)return[];for(var e=t[0].map(function(t){return[t]}),n=1;n<t.length;++n)t[n].forEach(function(t,n){return e[n].push(t)});return e}function i(t,e){if(Array.isArray(t)){var n=t;if(n.indexOf(e)>=0)return n.map(function(t){return t===e?NaN:t})}return t===e?NaN:t}function o(t,e){return"int"===e.type&&"missing"in e?i(t,e.missing):t}function s(t,e,r){void 0===r&&(r={});var i=n.i(c.a)({skipEmptyCategories:!0,colors:["gray"],labels:null,name:"Partitioning"},r),o=e.map(function(t,e){return{name:i.labels?i.labels[e]:t,color:i.colors[Math.min(e,i.colors.length-1)],indices:[]}});t.forEach(function(t,n){var r=e.indexOf(t);r>=0&&o[r].indices.push(n)}),i.skipEmptyCategories&&(o=o.filter(function(t){return t.indices.length>0}));var s=o.map(function(t){return new p.j(t.name,t.color,p.h.from(t.indices))});return n.i(p.k)(i.name,s)}var u=n(3),c=n(1),a=n(43),p=n(42);n.d(e,"a",function(){return f}),e.d=r,e.c=o,e.b=s;var f=function(t){function e(e){var n=t.call(this)||this;return n.desc=e,n}return u.a(e,t),Object.defineProperty(e.prototype,"dim",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.ids=function(t){return void 0===t&&(t=n.i(p.c)()),Promise.resolve(n.i(p.e)())},e.prototype.idView=function(t){return Promise.resolve(this)},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return this.desc.id},e.prototype.restore=function(t){return this},e.prototype.toString=function(){return this.persist()},e}(a.a)},45:function(t,e,n){"use strict";function r(){return new d}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?r():1===t.length?t[0]:new l(t)}function o(t,e,n){return new p(t,e,n)}function s(t){return new h(t)}function u(t){return new f(t)}var c=n(3);n.d(e,"c",function(){return p}),e.e=i,e.a=o,e.b=s,e.d=u;var a=function(){function t(){}return t.prototype.hasNext=function(){return!1},t.prototype.next=function(){return null},t.prototype.forEach=function(t,e){for(var n=0;this.hasNext();)t.call(e,this.next(),n++)},t.prototype.map=function(t,e){return new y(this,t,e)},t.prototype.asList=function(){for(var t=[];this.hasNext();)t.push(this.next());return t},Object.defineProperty(t.prototype,"isIncreasing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDecreasing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byOne",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byMinusOne",{get:function(){return!1},enumerable:!0,configurable:!0}),t}(),p=function(t){function e(e,n,r){var i=t.call(this)||this;return i.from=e,i.to=n,i.step=r,i.act=i.from,i}return c.a(e,t),e.prototype.hasNext=function(){return this.act!==this.to&&(this.step>0&&this.act<this.to||this.step<0&&this.act>this.to)},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");var t=this.act;return this.act+=this.step,this.step<0&&this.act<this.to?this.act=this.to:this.step>0&&this.act>this.to&&(this.act=this.to),t},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.step>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.step<0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return 1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return-1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(this.byOne)return Math.max(this.to-this.from,0);if(this.byMinusOne)return Math.max(this.from-this.to,0);var t=this.isIncreasing?this.to-this.from+1:this.from-this.to+1,e=Math.abs(this.step);return t<=0?0:Math.floor(t/e)},enumerable:!0,configurable:!0}),e}(a),f=function(t){function e(e){var n=t.call(this)||this;return n.arr=e,n.it=new p(0,e.length,1),n}return c.a(e,t),e.prototype.hasNext=function(){return this.it.hasNext()},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.arr[this.it.next()]},e.prototype.asList=function(){return this.arr.slice()},e}(a),h=function(t){function e(e){var n=t.call(this)||this;return n.value=e,n.delivered=!1,n}return c.a(e,t),e.prototype.hasNext=function(){return!this.delivered},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.delivered=!0,this.value},e.prototype.asList=function(){return[this.value]},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return!0},enumerable:!0,configurable:!0}),e}(a),l=function(t){function e(e){var n=t.call(this)||this;return n.its=e,n.act=e.shift(),n}return c.a(e,t),e.prototype.hasNext=function(){for(var t=!1;!(t=this.act.hasNext())&&this.its.length>0;)this.act=this.its.shift();return t},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.act.next()},e.prototype.asList=function(){for(var t=[];this.hasNext();)t.push(this.next());return t},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.its.every(function(t){return t.isIncreasing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.its.every(function(t){return t.isDecreasing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return this.its.every(function(t){return t.byOne})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return this.its.every(function(t){return t.byMinusOne})},enumerable:!0,configurable:!0}),e}(a),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isIncreasing=!1,e.isDecreasing=!1,e.byOne=!1,e.byMinusOne=!1,e}return c.a(e,t),e.prototype.hasNext=function(){return!1},e.prototype.next=function(){throw new RangeError("end of iterator")},e.prototype.asList=function(){return[]},e}(a),y=function(t){function e(e,n,r){var i=t.call(this)||this;return i.it=e,i.f=n,i.thisArg=r,i}return c.a(e,t),e.prototype.hasNext=function(){return this.it.hasNext()},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.f.call(this.thisArg,this.it.next())},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.it.isIncreasing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.it.isDecreasing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return this.it.byOne},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return this.it.byMinusOne},enumerable:!0,configurable:!0}),e}(a)},46:function(t,e,n){"use strict";(function(t){function r(t,e,n){return new o(t,e,n,n)}function i(t,e){return new o(t.type,t.args,e,t.target)}n.d(e,"a",function(){return u}),n.d(e,"b",function(){return c});var o=function(){function t(t,e,n,r){this.type=t,this.args=e,this.target=n,this.delegateTarget=r,this.timeStamp=new Date,this.stopped=!1,this.stopedPropagation=!1}return Object.defineProperty(t.prototype,"currentTarget",{get:function(){return this.target},enumerable:!0,configurable:!0}),t.prototype.isImmediatePropagationStopped=function(){return this.stopped},t.prototype.stopImmediatePropagation=function(){this.stopped=!0},t.prototype.isPropagationStopped=function(){return this.stopedPropagation},t.prototype.stopPropagation=function(){this.stopedPropagation=!0},t}(),s=function(){function t(t){this.type=t,this.listeners=[]}return t.prototype.push=function(t){this.listeners.push(t)},t.prototype.remove=function(t){var e=this.listeners.indexOf(t);return e>=0&&(this.listeners.splice(e,1),!0)},t.prototype.fire=function(t){if(0===this.listeners.length)return!1;var e=[t].concat(t.args);if(1===this.listeners.length)this.listeners[0].apply(t,e);else for(var n=this.listeners.slice(),r=n.length,i=0;i<r&&!t.isImmediatePropagationStopped();++i)n[i].apply(t,e);return!0},Object.defineProperty(t.prototype,"length",{get:function(){return this.listeners.length},enumerable:!0,configurable:!0}),t}(),u=function(){function t(){this.handlers={}}return t.prototype.on=function(t,e){var n=this;return"string"==typeof t?t.split(",").forEach(function(t){n.handlers.hasOwnProperty(t)||(n.handlers[t]=new s(t)),n.handlers[t].push(e)}):Object.keys(t).forEach(function(e){var r=t[e];n.on(e,r)}),this},t.prototype.off=function(t,e){var n=this;return"string"==typeof t?t.split(",").forEach(function(t){if(n.handlers.hasOwnProperty(t)){var r=n.handlers[t];r.remove(e),0===r.length&&delete n.handlers[t]}}):Object.keys(t).forEach(function(e){var r=t[e];n.off(e,r)}),this},t.prototype.list=function(){var t=this,e={};return Object.keys(this.handlers).forEach(function(n){e[n]=t.handlers[n].length}),e},t.prototype.fire=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return t.split(",").forEach(function(t){e.fireEvent(r(t,n,e))}),this},t.prototype.fireEvent=function(t){if(this.handlers.hasOwnProperty(t.type)){return this.handlers[t.type].fire(t)}return!1},t.prototype.propagate=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.on(n.join(","),function(t){t.isPropagationStopped()||e.fireEvent(i(t,e))})},t}(),t=new u,c=(t.on.bind(t),t.off.bind(t),t.fire.bind(t));t.list.bind(t)}).call(e,n(48))},48:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n}});